(this.webpackJsonpmapboxAndReact=this.webpackJsonpmapboxAndReact||[]).push([[0],{33:function(e,t,a){},36:function(e,t,a){e.exports=a.p+"static/media/pp.fca044ea.png"},42:function(e,t,a){e.exports=a(70)},47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),i=a.n(s);a(47),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(5),c=a(6),l=a(8),u=a(7),m=(a(48),a(11)),p=a.n(m),d=a(29),h=a(18),f=a(15),g=a.n(f),v=(a(50),a(33),a(35)),b=a.n(v).a.initializeApp({apiKey:"AIzaSyAP9SY8RCk9kB4s9nubnA6t8ShfBdH4Hkc",authDomain:"florayion.firebaseapp.com",databaseURL:"https://florayion.firebaseio.com",projectId:"florayion",storageBucket:"florayion.appspot.com",messagingSenderId:"866204326214",appId:"1:866204326214:web:06d3bac4cd710b8f69ad47",measurementId:"G-EQ9Z60REKF"}),y=a(27),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleStyleClick=function(e){n.props.changeStyle(e)},n.handleLogout=function(){b.auth().signOut()},n.onSelect=function(e,t){n.props.handleInput(e,t)},n.state={styles:[{key:1,name:"Dark",link:"dark-v10"},{key:2,name:"Satellite",link:"satellite-streets-v11"},{key:3,name:"Outdoors",link:"outdoors-v11"},{key:4,name:"Light",link:"light-v10"},{key:5,name:"Streets",link:"streets-v11"}],types:[{name:"all",link:"mapbox://styles/mapbox/all"},{name:"Flora",link:"mapbox://styles/mapbox/Flora"},{name:"Fauna",link:"mapbox://styles/mapbox/Fauna"},{name:"Disturbances",link:"mapbox://styles/mapbox/Disturbances"}]},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"MapControls"},r.a.createElement("input",{type:"checkbox",id:"toggle"}),r.a.createElement("div",{className:"col0"},r.a.createElement("div",{className:"controlsInner"},r.a.createElement("div",null,r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},"Styles"),r.a.createElement("div",{className:"dropdown-content"},this.state.styles.map((function(t,a,n){return r.a.createElement("p",{key:a,name:t.link,onClick:function(){return e.handleStyleClick(t)}},t.name)})))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},"Disturbances"),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(y.Multiselect,{options:this.props.disturbances,selectedValues:this.state.selectedValue,onSelect:this.onSelect,onRemove:this.onRemove,displayValue:"name"}))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},"Flora"),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(y.Multiselect,{options:this.props.flora,selectedValues:this.state.selectedValue,onSelect:this.onSelect,onRemove:this.onRemove,displayValue:"name"}))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},"Fauna"),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(y.Multiselect,{options:this.props.fauna,selectedValues:this.state.selectedValue,onSelect:this.onSelect,onRemove:this.onRemove,displayValue:"name"}))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn",onClick:this.handleLogout},"Logout")))),r.a.createElement("label",{htmlFor:"toggle"},r.a.createElement("div",{className:"toggleBtn1"},r.a.createElement("div",{className:"arrow-right"})))))}}]),a}(n.Component),E=(a(62),a(39)),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"customization_Panel"},r.a.createElement("input",{type:"checkbox",id:"sidepanel_toggle"}),r.a.createElement("div",{id:"mySidepanel",className:"sidepanel"}),r.a.createElement("label",{htmlFor:"sidepanel_toggle"},r.a.createElement("div",{className:"toggleBtn2"},r.a.createElement("div",{className:"vbar"}))))}}]),a}(r.a.Component),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).uniq=function(e){return Array.from(new Set(e.sort()))},n.makeObjectsFromArray=function(e,t,a){for(var n=[],r=0;r<e.length;r++)n.push({name:e[r],id:t+r.toString(),type:a});return n},n.fetchAvaliableSpecies=Object(h.a)(p.a.mark((function e(){var t,a,r,s,i,o,c,l,u,m,h,f,g,v,y,k;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.firestore(),e.next=3,t.collection("MainData").get();case 3:a=e.sent,r=a.docs.map((function(e){return Object(d.a)({},e.data(),{id:e.id})})),s=r[0].Birds,i=r[0].Mammals,o=n.makeObjectsFromArray(n.uniq(s.concat(i)),"FNA","Fauna"),n.setState({faunaSpecies:o}),c=r[1].Tree,l=r[1].Grass,u=r[1].Shurb,m=n.makeObjectsFromArray(n.uniq(c.concat(l,u)),"FLA","Flora"),n.setState({floraSpecies:m}),h=r[2]["NTFP collection"],f=r[2]["Sand Mining"],g=r[2].Human,v=r[2]["Activity site"],y=r[2].livestock,k=n.makeObjectsFromArray(n.uniq(h.concat(f,g,v,y)),"DTB","Disturbance"),n.setState({disturbancesTypes:k});case 21:case"end":return e.stop()}}),e)}))),n.fetchData=Object(h.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.firestore(),e.next=3,t.collection("userData/9839576859/Data").get();case 3:a=e.sent,r=a.docs.map((function(e){return Object(d.a)({},e.data(),{id:e.id})})),n.setState({flora:r.filter((function(e){return"Flora"===e.FFType}))}),n.setState({fauna:r.filter((function(e){return"Fauna"===e.FFType}))}),n.setState({disturbance:r.filter((function(e){return"Disturbance"===e.FFType}))});case 8:case"end":return e.stop()}}),e)}))),n.handleInputArray=function(e,t){if("Flora"===t.type){var a=[],r=n.state.flora.filter((function(e){return e.SpecieName===t.name})),s={name:t.name,count:r.length};if(n.state.markerCount.push(s),r.length>0)for(var i=0;i<r.length;i++){var o=parseFloat(r[i].Location.substring(12,22)),c=parseFloat(r[i].Location.substring(34,44)),l={type:r[i].FFType,subSpecie:r[i]["Sub-Specie"],name:r[i].SpecieName,cordinate:[o,c],time:r[i].Time};a.indexOf(t.name)<0&&(a.push(t.name),n.createCustomizationOptions(l)),n.addMarker(l,i)}}if("Fauna"===t.type){var u=[];if(r=n.state.fauna.filter((function(e){return e.SpecieName===t.name})),s={name:t.name,count:r.length},n.state.markerCount.push(s),r.length>0)for(i=0;i<r.length;i++)o=parseFloat(r[i].Location.substring(12,22)),c=parseFloat(r[i].Location.substring(34,44)),l={type:r[i].FFType,subSpecie:r[i]["Sub-Specie"],name:r[i].SpecieName,cordinate:[o,c],time:r[i].Time},u.indexOf(t.name)<0&&(u.push(t.name),n.createCustomizationOptions(l)),n.addMarker(l,i)}if("Disturbance"===t.type){var m=[];if(r=n.state.disturbance.filter((function(e){return e.SpecieName===t.name})),s={name:t.name,count:r.length},n.state.markerCount.push(s),r.length>0)for(i=0;i<r.length;i++)o=parseFloat(r[i].Location.substring(12,22)),c=parseFloat(r[i].Location.substring(34,44)),l={type:r[i].FFType,subSpecie:r[i]["Sub-Specie"],id:"DTB"+i.toString(),name:r[i].SpecieName,cordinate:[o,c],time:r[i].Time},m.indexOf(t.name)<0&&(m.push(t.name),n.createCustomizationOptions(l)),n.addMarker(l,i)}},n.addMarker=function(e,t){var a=new g.a.Popup({offset:5}).setHTML("<h6>".concat(e.name,"</h6><strong>").concat(e.subSpecie,"<br>").concat(e.type,"</strong><p>Lat: ").concat(e.cordinate[1],"<br>Lng: ").concat(e.cordinate[0],"</p>")),r=document.createElement("div");r.id=e.name+"-marker"+t.toString(),r.style.cssText="background-size: cover; width: 100px; height: 100px; border-radius: 50%; cursor: pointer; background: radial-gradient(circle 15px, #000000 0%, #00000000 100%)",new g.a.Marker(r).setLngLat(e.cordinate).setPopup(a).addTo(n.map)},n.handleMarkerColorChange=function(e){for(var t=0;t<n.state.markerCount.length;t++)if(n.state.markerCount[t].name===e.target.id)for(var a=0;a<n.state.markerCount[t].count;a++){var r=document.getElementById(e.target.id+"-marker"+a.toString());i.a.findDOMNode(r).style.background="radial-gradient(circle 15px, "+e.target.value+" 0%, #00000000 100%)"}},n.createCustomizationOptions=function(e){var t=document.getElementById("mySidepanel"),a=document.createElement("p");a.innerHTML=e.name,a.className="sidePanelElement_SpecieName";var r=document.createElement("input");r.type="color",r.id=e.name,r.onchange=n.handleMarkerColorChange;var s=document.createElement("div");s.className="sidePanelElement",s.appendChild(a),s.appendChild(r),t.appendChild(s)},n.handleStyleBtnClick=function(e){var t=e.link;n.setState({style:t}),n.swapStyle(t)},n.state={lat:26.4499,lng:80.3319,zoom:6,style:"mapbox://styles/mapbox/light-v10",Data:0,faunaSpecies:[],floraSpecies:[],disturbancesTypes:[],flora:[],fauna:[],disturbance:[],markerCount:[],markedFlora:[],markedFauna:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchData(),this.fetchAvaliableSpecies(),g.a.accessToken="pk.eyJ1IjoiZGV2NTk2IiwiYSI6ImNrOHJsaHY5cDAzcGQzbHBqc21vaWsxcnMifQ.B5rBbh4fDvTHEqQHrGU_Bg";var t=this.state,a=t.lat,n=t.lng,r=t.zoom,s=t.style;this.map=new g.a.Map({container:this.mapContainer,style:s,center:[n,a],zoom:r}),this.map.on("load",Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.map.addSource("earthquakes",{type:"geojson",data:"https://raw.githubusercontent.com/Devansh-S/shapefiles/master/state_ut/jj.geojson"}),e.map.addLayer({id:"earthquakes",type:"line",source:"earthquakes",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgb(255,0,0)","line-width":2}});case 2:case"end":return t.stop()}}),t)}))))}},{key:"swapStyle",value:function(e){var t=this,a=this.map.getStyle();Object(E.a)("https://api.mapbox.com/styles/v1/mapbox/".concat(e,"?access_token=").concat(g.a.accessToken),(function(e){e.sources=Object.assign({},a.sources,e.sources);var n=e.layers.findIndex((function(e){return"waterway-label"===e.id})),r=a.layers.filter((function(e){return e.source&&"mapbox://mapbox.satellite"!==e.source&&"composite"!==e.source}));r.reverse(),r.forEach((function(t){e.layers.splice(n,0,t)})),t.map.setStyle(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"}),r.a.createElement("div",{className:"controlsWrapper"},r.a.createElement(k,{disturbances:this.state.disturbancesTypes,flora:this.state.floraSpecies,fauna:this.state.faunaSpecies,changeStyle:this.handleStyleBtnClick,handleInput:this.handleInputArray}),r.a.createElement(S,null)))}}]),a}(r.a.Component),N=a(25),C=(a(63),a(64),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"base-container",ref:this.props.containerRef},r.a.createElement("div",{className:"header"},"Login"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"email",placeholder:"email",value:this.props.usernameValue,onChange:function(t){return e.props.onChangeUsername(t.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.props.passwordValue,onChange:function(t){return e.props.onChangePassword(t.target.value)}}))),r.a.createElement("button",{type:"button",className:"Btn",onClick:function(t){return e.props.onClick(t)},disabled:this.props.BtnDisable},"Login")))}}]),a}(r.a.Component)),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"base-container",ref:this.props.containerRef},r.a.createElement("div",{className:"header"},"Register"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"email",placeholder:"email",value:this.props.usernameValue,onChange:function(t){return e.props.onChangeUsername(t.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.props.passwordValue,onChange:function(t){return e.props.onChangePassword(t.target.value)}}))),r.a.createElement("button",{type:"button",className:"Btn",onClick:function(t){return e.props.onClick(t)},disabled:this.props.BtnDisable},"Register")))}}]),a}(r.a.Component),x=a(26),F=a.n(x),j=a(36),L=a.n(j),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createOverlay=function(e,t){var a=document.getElementById("LoginApp"),r=document.createElement("div");r.className="dialogBox",r.id="overlay",a.appendChild(r);var s=document.createElement("p");s.innerHTML=e,s.id="dialog_text",s.className="dialog_text";var i=document.createElement("div");if(i.className="dialogBox-inner",i.id="dialogBox-inner",i.appendChild(s),a.appendChild(i),t>0){var o=setTimeout((function(){i.parentNode.removeChild(i),r.parentNode.removeChild(r)}),t);return n.resetForm(),function(){return clearTimeout(o)}}},n.changeOverlayText=function(e,t){document.getElementById("dialog_text").innerHTML=e;var a=document.getElementById("dialogBox-inner"),r=document.getElementById("overlay");if(t>0){var s=setTimeout((function(){a.parentNode.removeChild(a),r.parentNode.removeChild(r)}),t);return n.resetForm(),function(){return clearTimeout(s)}}},n.state={isLogginActive:!0,username:"",password:"",buttonDisabled:!1,regFlag:!1},n}return Object(c.a)(a,[{key:"setInputValue",value:function(e,t){t=t.trim(),this.setState(Object(N.a)({},e,t))}},{key:"resetForm",value:function(){this.setState({username:"",password:"",buttonDisabled:!1})}},{key:"doLogin",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.username){e.next=2;break}return e.abrupt("return");case 2:if(this.state.password){e.next=4;break}return e.abrupt("return");case 4:this.setState({buttonDisabled:!0});try{this.createOverlay("Logging In\nPlease wait!"),b.auth().signInWithEmailAndPassword(this.state.username,this.state.password).then((function(e){})).catch((function(e){a.changeOverlayText(e,3e3)}))}catch(t){console.log(t),this.resetForm()}case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"doSignup",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.username){e.next=2;break}return e.abrupt("return");case 2:if(this.state.password){e.next=4;break}return e.abrupt("return");case 4:return this.setState({buttonDisabled:!0}),e.prev=5,this.createOverlay("Please wait!"),a=b.firestore(),e.next=10,a.collection("ControlFlags").doc("enableRegistrationFlag").get();case 10:e.sent.data().value?(b.auth().createUserWithEmailAndPassword(this.state.username,this.state.password).then((function(){n.reg("Registering User\n Please wait!")})).then((function(e){console.log(e)})).catch((function(e){n.changeOverlayText(e,3e3)})),console.log("ppp")):alert("SignUp is Disabled! Please Login using given credentials"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0),this.resetForm();case 18:case"end":return e.stop()}}),e,this,[[5,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.rightSide.classList.add("right"),b.auth().onAuthStateChanged((function(t){t?(console.log("/apppp"),e.props.history.push("/GTFapp/app")):(console.log("////////"),e.props.history.push("/GTFapp/"))})),this.setState({loading:!1})}},{key:"changeState",value:function(){this.state.isLogginActive?(this.rightSide.classList.remove("right"),this.rightSide.classList.add("left")):(this.rightSide.classList.remove("left"),this.rightSide.classList.add("right")),this.setState((function(e){return{isLogginActive:!e.isLogginActive}}))}},{key:"render",value:function(){var e=this,t=this.state.isLogginActive,a=t?"Register":"Login",n=t?"login":"register";return r.a.createElement("div",null,this.state.loading?r.a.createElement("div",{className:"loader"},r.a.createElement(F.a,{type:"bars",color:"black",height:100,width:100})):r.a.createElement("div",{className:"LoginApp",id:"LoginApp"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"mainContainer"},r.a.createElement("img",{src:L.a,alt:"background"}),r.a.createElement("div",{className:"container",ref:function(t){return e.container=t}},t&&r.a.createElement(C,{containerRef:function(t){return e.current=t},usernameValue:this.state.username?this.state.username:"",onChangeUsername:function(t){return e.setInputValue("username",t)},passwordValue:this.state.password?this.state.password:"",onChangePassword:function(t){return e.setInputValue("password",t)},onClick:function(t){return e.doLogin(t)},BtnDisable:this.buttonDisabled}),!t&&r.a.createElement(O,{containerRef:function(t){return e.current=t},usernameValue:this.state.username?this.state.username:"",onChangeUsername:function(t){return e.setInputValue("username",t)},passwordValue:this.state.password?this.state.password:"",onChangePassword:function(t){return e.setInputValue("password",t)},onClick:function(t){return e.doSignup(t)},BtnDisable:this.buttonDisabled}),r.a.createElement(I,{current:a,currentActive:n,containerRef:function(t){return e.rightSide=t},onClick:this.changeState.bind(this)}))))))}}]),a}(r.a.Component),I=function(e){return r.a.createElement("div",{className:"right-side",ref:e.containerRef,onClick:e.onClick},r.a.createElement("div",{className:"inner-container"},r.a.createElement("div",{className:"text"},e.current)))},B=T,D=a(21),A=a(14),M=a(40),V=function(e){var t=e.component,a=e.loggedIn,n=Object(M.a)(e,["component","loggedIn"]);return r.a.createElement(A.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(A.a,{to:{pathname:"/GTFapp/"}})}}))},R=(a(69),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isLogginActive:!0,isUserLoggedIn:{},flag:!1,loading:!0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;b.auth().onAuthStateChanged((function(t){return t?(e.setState({isUserLoggedIn:t}),e.setState({flag:!0}),e.setState({loading:!1})):(e.setState({isUserLoggedIn:null}),e.setState({loading:!1})),t}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.loading?r.a.createElement("div",{className:"loader"},r.a.createElement(F.a,{type:"bars",color:"black",height:100,width:100})):r.a.createElement(D.a,null,r.a.createElement(A.b,{exact:!0,path:"/GTFapp/",component:B}),r.a.createElement(V,{exact:!0,path:"/GTFapp/app",component:w,loggedIn:this.state.flag})))}}]),a}(r.a.Component));g.a.accessToken="pk.eyJ1IjoiZGV2NTk2IiwiYSI6ImNrOHJsaHY5cDAzcGQzbHBqc21vaWsxcnMifQ.B5rBbh4fDvTHEqQHrGU_Bg",i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D.a,null,r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.e861c5d9.chunk.js.map